<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙØµÙ„Ø­ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Appwrite</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: #f4f7f6;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 1rem;
        }

        p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .input-group {
            margin: 1.5rem 0;
            text-align: right;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-sizing: border-box;
            font-family: inherit;
        }

        button {
            background: #E91E63;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            width: 100%;
            transition: background 0.3s;
        }

        button:hover {
            background: #C2185B;
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        #logs {
            margin-top: 1.5rem;
            text-align: left;
            background: #222;
            color: #0f0;
            padding: 1rem;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.8rem;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }
    </style>
</head>

<body>
    <div class="card">
        <h1>Ù…ØµÙ„Ø­ Appwrite ğŸ› ï¸</h1>
        <p>Ø§Ù„Ø£Ø¯Ø§Ø© Ø¯ÙŠ Ù‡ØªÙ†Ø´Ø¦ Ù„Ùƒ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù„ÙŠ Ù†Ø§Ù‚ØµØ© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ Ø¹Ø´Ø§Ù† Ø§Ù„Ø­ÙØ¸ ÙŠØ´ØªØºÙ„.</p>

        <div class="form-group">
            <label>API Key (Ù‡Ø§ØªÙ‡ Ù…Ù† Settings -> API Keys)</label>
            <input type="password" id="apiKey" placeholder="Ù…Ø«Ù„Ø§Ù‹: 696a54d356f08..." required>
        </div>

        <div class="form-group">
            <label>Database ID (Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù„ÙˆØ­Ø© Databases)</label>
            <input type="text" id="dbIdInput" value="MainDatabase" placeholder="Ù…Ø«Ù„Ø§Ù‹: MainDatabase">
        </div>

        <button id="fixBtn">Ø¨Ø¯Ø£ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¢Ù† âœ…</button>

        <div id="logs"></div>

        <!-- Manual Guide Section -->
        <div id="manualGuide"
            style="display:none; margin-top:20px; text-align:right; border-top: 2px solid #dc3545; padding-top:20px;">
            <h3 style="color:#dc3545;">âš ï¸ ÙØ´Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØŸ Ø¥Ù„ÙŠÙƒ Ø§Ù„Ø­Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø§Ù„Ø¨Ø³ÙŠØ·:</h3>
            <p>Ø§Ù„Ù…ØªØµÙØ­ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù„Ø¢Ù…Ø§Ù† Ø­Ø³Ø§Ø¨Ùƒ. Ø§ØªØ¨Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ§Øª ÙÙŠ Ù„ÙˆØ­Ø© Appwrite:</p>
            <ol>
                <li>Ø§Ø°Ù‡Ø¨ Ù„Ù€ <b>Databases</b> ÙˆØ§ÙØªØ­ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ.</li>
                <li>Ø§Ø¶ØºØ· <b>Create Collection</b> ÙˆØ³Ù…Ù‘Ù‡Ø§: <code>Security Logs</code> ÙˆÙ…Ø¹Ø±ÙÙ‡Ø§ (ID) ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ†:
                    <code>security_logs</code>.
                </li>
                <li>Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆÙ„ÙŠÙƒØ´Ù†ØŒ Ø§Ø°Ù‡Ø¨ Ù„ØªØ¨ÙˆÙŠØ¨ <b>Attributes</b> ÙˆØ£Ø¶Ù Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØ§Ù„ÙŠØ© (ÙƒÙ„Ù‡Ø§ Ù…Ù† Ù†ÙˆØ¹ String):
                    <ul>
                        <li><code>userId</code> (Size: 100)</li>
                        <li><code>action</code> (Size: 255)</li>
                        <li><code>details</code> (Size: 1000)</li>
                        <li><code>timestamp</code> (Size: 100)</li>
                        <li><code>ip</code> (Size: 50)</li>
                    </ul>
                </li>
                <li><b>(Ø®Ø·ÙˆØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹):</b> Ø§Ø°Ù‡Ø¨ Ù„ØªØ¨ÙˆÙŠØ¨ <b>Settings</b> Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆÙ„ÙŠÙƒØ´Ù†ØŒ ÙˆØªØ­Øª <b>Permissions</b> Ø§Ø¶ØºØ·
                    Add RoleØŒ Ø§Ø®ØªØ± <b>Any</b> ÙˆÙØ¹Ù‘Ù„ Ø®ÙŠØ§Ø± <b>Create</b> Ùˆ <b>Read</b>.</li>
            </ol>
            <p>Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ØŒ Ø³ÙŠØ¹Ù…Ù„ Ø§Ù„Ø³Ø¬Ù„ ÙÙˆØ±Ø§Ù‹!</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/appwrite@13.0.1"></script>
    <script src="js/appwrite-config.js"></script>
    <script>
        const fixBtn = document.getElementById('fixBtn');
        const logsEl = document.getElementById('logs');
        const apiKeyInput = document.getElementById('apiKey');
        const dbIdInput = document.getElementById('dbIdInput');
        const manualGuide = document.getElementById('manualGuide');


        function log(msg, color = '#0f0') {
            logsEl.style.display = 'block';
            const line = document.createElement('div');
            line.style.color = color;
            line.innerHTML = `> ${msg}`;
            logsEl.appendChild(line);
            logsEl.scrollTop = logsEl.scrollHeight;
        }

        fixBtn.addEventListener('click', async () => {
            const key = apiKeyInput.value.trim();
            if (!key) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù€ API Key Ø£ÙˆÙ„Ø§Ù‹");

            fixBtn.disabled = true;
            fixBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥ØµÙ„Ø§Ø­... â³';
            logsEl.innerHTML = '';
            manualGuide.style.display = 'none'; // Hide manual guide on new attempt

            const { client, DB_ID, COLLECTIONS } = window.appwrite;

            // We need to use server-side style headers if possible, 
            // but the web SDK doesn't support API keys easily for security.
            // WORKAROUND: We will use window.fetch to call the Appwrite API directly using the key.

            // Fallback for endpoint/project if SDK version varies
            const dbIdUsed = dbIdInput.value.trim() || DB_ID;

            // Fallback for endpoint/project if SDK version varies
            const endpoint = client.config.endpoint || 'https://fra.cloud.appwrite.io/v1';
            const project = client.config.project || '69662d2200214465b1d3';

            log(`Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${project} | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${dbIdUsed}`, '#888');

            const headers = {
                'Content-Type': 'application/json',
                'X-Appwrite-Project': project,
                'X-Appwrite-Key': key
            };

            async function listDatabases() {
                log(`Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹... ğŸ”`);
                const url = `${endpoint}/databases`;
                try {
                    const res = await fetch(url, { headers });
                    const data = await res.json();
                    if (res.ok) {
                        return data.databases || [];
                    } else {
                        throw new Error(data.message);
                    }
                } catch (e) {
                    log(`âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ${e.message}`, '#F44336');
                    return [];
                }
            }

            async function createCollection(dbId, collectionId, name) {
                log(`Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙƒÙˆÙ„ÙŠÙƒØ´Ù†: ${name} (${collectionId})...`);
                const url = `${endpoint}/databases/${dbId}/collections`;
                try {
                    const res = await fetch(url, {
                        method: 'POST',
                        headers,
                        body: JSON.stringify({
                            collectionId: collectionId,
                            name: name,
                            permissions: ['create("any")', 'read("any")'],
                            documentSecurity: false
                        })
                    });
                    const data = await res.json();
                    if (res.ok) {
                        log(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆÙ„ÙŠÙƒØ´Ù†: ${name}`, '#4CAF50');
                        return true;
                    } else if (data.code === 409) {
                        log(`â„¹ï¸ Ø§Ù„ÙƒÙˆÙ„ÙŠÙƒØ´Ù† ${name} Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„.`, '#FFC107');
                        return true;
                    } else {
                        throw new Error(data.message);
                    }
                } catch (e) {
                    log(`âŒ ÙØ´Ù„ ÙÙŠ ${name}: ${e.message}`, '#F44336');
                    return false;
                }
            }

            async function createAttribute(dbId, collectionId, key, type, extra = {}) {
                log(`Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ù‚Ù„: ${key}...`);
                const url = `${endpoint}/databases/${dbId}/collections/${collectionId}/attributes/${type}`;
                try {
                    const res = await fetch(url, {
                        method: 'POST',
                        headers,
                        body: JSON.stringify({ key, ...extra })
                    });
                    const data = await res.json();
                    if (res.ok) {
                        log(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù‚Ù„: ${key}`, '#4CAF50');
                    } else if (data.code === 409) {
                        log(`â„¹ï¸ Ø§Ù„Ø­Ù‚Ù„ ${key} Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„.`, '#FFC107');
                    } else {
                        throw new Error(data.message);
                    }
                } catch (e) {
                    log(`âš ï¸ Ø§Ù„Ø­Ù‚Ù„ ${key}: ${e.message}`);
                }
            }

            try {
                log('Ø¨Ø¯Ø£ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ÙØ­Øµ Ø§Ù„Ø´Ø§Ù…Ù„Ø©... âš™ï¸');

                // 1. Discover Real DB ID
                let actualDbId = dbIdUsed;
                try {
                    const dbs = await listDatabases();
                    if (dbs.length > 0) {
                        const dbExists = dbs.find(d => d.$id === dbIdUsed);
                        if (!dbExists) {
                            actualDbId = dbs[0].$id;
                            log(`âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ù€ ID Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (${dbIdUsed}) ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.`, '#FFC107');
                            log(`ğŸ” ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯ÙŠÙ„Ø©: <b>${actualDbId}</b>`, '#007bff');
                        } else {
                            log(`âœ… ØªÙ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${dbIdUsed}`, '#4CAF50');
                        }
                    } else {
                        log(`â„¹ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‚ÙˆØ§Ø¹Ø¯ Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø³Ù†Ø­Ø§ÙˆÙ„ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø¨Ù€ ID: ${dbIdUsed}`, '#888');
                    }
                } catch (discoveryErr) {
                    log(`âš ï¸ ÙØ´Ù„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Discovery)ØŒ Ø³Ù†Ø­Ø§ÙˆÙ„ ÙŠØ¯ÙˆÙŠÙ‹Ø§...`, '#FFC107');
                }

                // 2. Create/Verify Collections
                log('--- Ø®Ø·ÙˆØ© 1: Ø§Ù„ÙƒÙˆÙ„ÙŠÙƒØ´Ù†Ø² ---');
                log(`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${actualDbId}...`);

                const c1 = await createCollection(actualDbId, COLLECTIONS.MATERIALS, 'Materials');
                const c2 = await createCollection(actualDbId, COLLECTIONS.USERS, 'Users');
                const c3 = await createCollection(actualDbId, COLLECTIONS.LOGS, 'Security Logs');

                if (!c3) {
                    manualGuide.style.display = 'block';
                    throw new Error("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆÙ„ÙŠÙƒØ´Ù† Ø§Ù„Ø³Ø¬Ù„Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§ØªØ¨Ø§Ø¹ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„.");
                }

                log('--- Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø­Ù‚ÙˆÙ„ (Attributes) ---');

                // Security Logs Attributes (The most important right now)
                log('ØªØ¬Ù‡ÙŠØ² Ø­Ù‚ÙˆÙ„ Security Logs...');
                const lAttrs = [
                    { k: 'userId', t: 'string', ex: { size: 100, required: true } },
                    { k: 'action', t: 'string', ex: { size: 255, required: true } },
                    { k: 'details', t: 'string', ex: { size: 1000, required: false } },
                    { k: 'timestamp', t: 'string', ex: { size: 100, required: true } },
                    { k: 'ip', t: 'string', ex: { size: 50, required: false } }
                ];

                for (const a of lAttrs) {
                    await createAttribute(actualDbId, COLLECTIONS.LOGS, a.k, a.t, a.ex);
                }

                // Users Attributes
                log('ØªØ¬Ù‡ÙŠØ² Ø­Ù‚ÙˆÙ„ Users...');
                const uAttrs = [
                    { k: 'id', t: 'string', ex: { size: 50, required: true } }, // String for $id mirror
                    { k: 'firstName', t: 'string', ex: { size: 100, required: false } },
                    { k: 'lastName', t: 'string', ex: { size: 100, required: false } },
                    { k: 'email', t: 'string', ex: { size: 255, required: false } },
                    { k: 'username', t: 'string', ex: { size: 100, required: true } },
                    { k: 'password', t: 'string', ex: { size: 100, required: true } },
                    { k: 'passwordHash', t: 'string', ex: { size: 255, required: false } },
                    { k: 'createdAt', t: 'string', ex: { size: 100, required: false } },
                    { k: 'creationDate', t: 'string', ex: { size: 100, required: false } }, // Schema compatibility
                    { k: 'isSuspended', t: 'boolean', ex: { required: false, default: false } },
                    { k: 'isActive', t: 'boolean', ex: { required: false, default: true } },
                    { k: 'deviceId', t: 'string', ex: { size: 255, required: false } },
                    { k: 'avatar', t: 'string', ex: { size: 1000, required: false } },
                    { k: 'role', t: 'string', ex: { size: 50, required: false, default: 'student' } }
                ];
                for (const a of uAttrs) { await createAttribute(actualDbId, COLLECTIONS.USERS, a.k, a.t, a.ex); }

                // Materials Attributes
                log('ØªØ¬Ù‡ÙŠØ² Ø­Ù‚ÙˆÙ„ Materials...');
                const mAttrs = [
                    { k: 'id', t: 'string', ex: { size: 50, required: true } },
                    { k: 'subjectId', t: 'string', ex: { size: 50, required: true } },
                    { k: 'subjectDisplay', t: 'string', ex: { size: 100, required: true } },
                    { k: 'sectionId', t: 'string', ex: { size: 50, required: true } },
                    { k: 'sectionDisplay', t: 'string', ex: { size: 100, required: true } },
                    { k: 'title', t: 'string', ex: { size: 255, required: true } },
                    { k: 'desc', t: 'string', ex: { size: 1000, required: false } },
                    { k: 'url', t: 'string', ex: { size: 500, required: true } },
                    { k: 'isBlob', t: 'boolean', ex: { required: false, default: false } },
                    { k: 'size', t: 'integer', ex: { required: false, min: 0 } },
                    { k: 'date', t: 'string', ex: { size: 100, required: false } }
                ];
                for (const a of mAttrs) { await createAttribute(actualDbId, COLLECTIONS.MATERIALS, a.k, a.t, a.ex); }

                log('--- Ø®Ø·ÙˆØ© 3: ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ù„ÙØ§Øª (Storage) ---');
                const BUCKET_ID = window.appwrite.BUCKET_ID || '696634ee001b4024cc9d';
                log(`Ø¬Ø§Ø±ÙŠ Ø¶Ø¨Ø· ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¨Ø§ÙƒØª: ${BUCKET_ID}...`);
                try {
                    const bucketUrl = `${endpoint}/storage/buckets/${BUCKET_ID}`;
                    // Update Bucket Permissions
                    await fetch(bucketUrl, {
                        method: 'PUT', // or PATCH depending on version, Appwrite API uses PUT for update usually
                        headers,
                        body: JSON.stringify({
                            permissions: ['create("any")', 'read("any")', 'update("users")', 'delete("users")'],
                            name: "Main Storage",
                            enabled: true,
                            fileSecurity: false
                        })
                    });
                    log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­!', '#4CAF50');
                } catch (bErr) {
                    log(`âš ï¸ ØªØ­Ø°ÙŠØ±: Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø§ÙƒØª Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠØ§Ù‹ (Ø±Ø¨Ù…Ø§ API Key ØºÙŠØ± ÙƒØ§ÙÙ Ù„Ù„ØªØ®Ø²ÙŠÙ†).`, '#FFC107');
                }

                log('---');
                log('ğŸ‰ ØªÙ…Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!', '#4CAF50');
                if (actualDbId !== DB_ID) {
                    alert(`âœ… Ø§Ù†ØªÙ‡Ù‰! ÙˆÙ„ÙƒÙ† Ø§Ù†ØªØ¨Ù‡:\n\nÙ„Ù‚Ø¯ ÙˆØ¬Ø¯Ù†Ø§ Ø£Ù† Ø§Ù„Ù€ ID Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ùˆ:\n${actualDbId}\n\nÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ØªØºÙŠÙŠØ± Ø§Ù„Ù€ DB_ID ÙÙŠ Ù…Ù„Ù js/appwrite-config.js Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„Ø³Ø¬Ù„.`);
                } else {
                    alert("âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø³Ø¬Ù„.");
                }

                log('---');
                log('ğŸ‰ ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù†ØªØ¸Ø± Ø¯Ù‚ÙŠÙ‚Ø© Ø«Ù… Ø¬Ø±Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù†.', '#fff');
                alert('âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….');

            } catch (err) {
                log(`â›” Ø®Ø·Ø£ Ø¹Ø§Ù…: ${err.message}`, '#F44336');
            } finally {
                fixBtn.disabled = false;
                fixBtn.textContent = 'Ø¨Ø¯Ø£ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¢Ù† âœ…';
            }
        });
    </script>
</body>

</html>